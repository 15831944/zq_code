#include <iostream>

int f(float num)
{
	//!??????? ?####### ######## ########
	//!表示符号位
	//?表示指数位
	//#表示底数位

	int* p = (int*)&num;

	//得到符号位
	bool fs = ((0x80000000 & (*p)) != 0);

	//得到指数
	//XXXXXXXX XXXXXXXX XXXXXXXX ????????
	int zs = ((*p) >> 23) & 0xff;
	zs -= 0x7f;

	//得到底数
	//!??????? ?####### ######## ########
	//00000000 01111111 11111111 11111111
	//&----------------------------------
	//00000000 0####### ######## ########
	int ds = ((*p) & 0x007fffff);
	//00000000 0####### ######## ########
	//00000000 10000000 00000000 00000000
	//|----------------------------------
	//00000000 1####### ######## ########
	ds |= 0x00800000;

	//得到正整数
	ds >>= 23 - zs;

	//根据符号位返回
	return fs ? -ds : ds;
}

void main()
{
	int a = f(-3.14);

	system("pause");
}